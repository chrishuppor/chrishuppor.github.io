---
layout: post
title: "MFC的exe界面修改"
pubtime: 2021-07-13
updatetime: 2021-07-13
categories: Reverse
tags: WriteUp
---

修改MFC构建的二进制程序界面。

# 2021-07-13-MFC的exe界面修改

1. 工具Resource Hacker、IDA、strings
    1. RH：用于查看程序界面的控件情况，用于增删程序控件、修改控件属性。
    2. IDA：用于修改二进制代码，有些字符串是硬编码在代码中的，也可以用WinHex等直接修改。
    3. strings：用于查看程序字符串信息，主要用来看看有没有加载的png、cfg等文件，因为有些资源不在程序的res中，而是从外部文件加载的。
2. 首先运行MFC程序，熟悉界面，大致推测用了哪些控件

## 控件修改

1. 使用RH打开程序，在Dialog中查找界面
    1. 有时程序界面通过贴图等操作进行了美化，所以Dialog中的界面不一定能够容易的认出，需要结合控件类型、文字等进行推测
2. 在RH的String中查看字符串信息
    1. 这里的字符串信息是直接写在MFC控件上的字符串，修改后，控件上的字符串会有相应的变化
        1. 有些控件字符串是从文件中加载的，在RH中的修改不起作用
    2. 有些字符串是直接写在代码中的，不会出现在RH的String中
3. 在RH的Icon中修改图标信息
    1. 这里的图标是二进制程序的图标

## 字符串修改

1. 使用strings扫描程序，重点查看有无明显的外部资源文件
    1. 查看外部资源文件，主要看其中是否包含界面中的字符串
2. RH中修改控件字符串信息
3. 如果某些字符串控件中没有、资源文件中也没有，那么可能是硬编码在代码里的字符串，需要使用IDA搜索text，修改对应的二进制串
4. 有些字符串看似是字符串实则是图片...

## 图片修改

1. 使用strings扫描程序，重点查看有无明显的外部资源文件
    1. 查看外部资源文件是否有目标图片(有些界面看似是多个图片的组合，实际上是一张大的背景图...)
2. RH查看图片是否作为程序的res被添加到程序中

总之，就是一边看一边猜可能是怎么做的一边验证，需要正向知识。